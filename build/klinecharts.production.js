!function(t,i){if("object"===typeof exports&&"object"===typeof module)module.exports=i();else if("function"===typeof define&&define.amd)define([],i);else{var e=i();for(var a in e)("object"===typeof exports?exports:t)[a]=e[a]}}(window,function(){return function(t){var i={};function e(a){if(i[a])return i[a].exports;var s=i[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,e),s.l=!0,s.exports}return e.m=t,e.c=i,e.d=function(t,i,a){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(a,s,function(i){return t[i]}.bind(null,s));return a},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var a=class{constructor(){this.contentRect={left:0,right:0,top:0,bottom:0},this.viewHeight=0,this.viewWidth=0}setChartDimens(t,i){this.viewWidth=t,this.viewHeight=i,this.restrainViewPort(this.contentLeft(),this.contentTop(),t-this.contentRight(),i-this.contentBottom())}restrainViewPort(t,i,e,a){this.contentRect.left=t,this.contentRect.right=this.viewWidth-e,this.contentRect.top=i,this.contentRect.bottom=this.viewHeight-a}contentTop(){return this.contentRect.top}contentLeft(){return this.contentRect.left}contentRight(){return this.contentRect.right}contentBottom(){return this.contentRect.bottom}getContentCenter(){let t={};return t.x=(this.contentRect.left+this.contentRect.right)/2,t.y=(this.contentRect.top+this.contentRect.bottom)/2,t}isInBoundsX(t){return this.isInBoundsLeft(t)&&this.isInBoundsRight(t)}isInBoundsLeft(t){return this.contentRect.left<=t+1}isInBoundsRight(t){let i=+(100*t).toFixed(0)/100;return this.contentRect.right>=i-1}};var s=class{constructor(t){this.viewPortHandler=t,this.dataList=[],this.min=0,this.range=120,this.maxRange=180,this.minRange=20,this.dataSpace=0,this.dataMarginSpaceRate=.2,this.currentDataPos=0}space(){this.dataSpace=(this.viewPortHandler.contentRight()-this.viewPortHandler.contentLeft())/this.range}moveToLast(){this.dataList.length>this.range?(this.min=this.dataList.length-this.range,this.currentDataPos=this.dataList.length-1):this.min=0}calcCurrentDataIndex(t){let i=+Math.ceil(t/this.dataSpace).toFixed(0);this.currentDataPos=this.min+i-1}};var o=class{constructor(t,i){this.dataBounds=t,this.viewPortHandler=i,this.chartTop=0,this.chartHeight=0}setChartDimens(t,i){this.chartHeight=t,this.chartTop=i}getY(t,i,e){return this.chartTop+(1-(t-i)/e)*this.chartHeight}};var h=class extends o{constructor(t,i,e){super(i,e),this.grid=t}draw(t){this.grid.display&&(t.strokeStyle=this.grid.lineColor,t.lineWidth=this.grid.lineSize,t.beginPath(),t.moveTo(this.viewPortHandler.contentLeft(),this.viewPortHandler.contentTop()),t.lineTo(this.viewPortHandler.contentRight(),this.viewPortHandler.contentTop()),t.lineTo(this.viewPortHandler.contentRight(),this.viewPortHandler.contentBottom()),t.lineTo(this.viewPortHandler.contentLeft(),this.viewPortHandler.contentBottom()),t.lineTo(this.viewPortHandler.contentLeft(),this.viewPortHandler.contentTop()),t.stroke(),t.closePath())}};var r={canvas:document.createElement("canvas").getContext("2d"),formatDate(t){let i=new Date(t),e=(i.getMonth()+1).toString(),a=i.getDate().toString(),s=i.getHours().toString(),o=i.getMinutes().toString();return(1===e.length?"0"+e:e)+"-"+(1===a.length?"0"+a:a)+" "+(1===s.length?"0"+s:s)+":"+(1===o.length?"0"+o:o)},calcTextWidth(t,i){return this.canvas.font=t,this.canvas.measureText(i).width},nice(t){let i=Math.floor(Math.log(t)/Math.log(10)),e=Math.pow(10,i),a=t/e,s=0;return t=(s=a<1?1:a<2?2:a<3?3:a<5?5:10)*e,i>=-20?+t.toFixed(i<0?-i:0):t},getIntervalPrecision(t){let i=t.toString(),e=i.indexOf("e");if(e>0){let t=+i.slice(e+1);return t<0?-t:0}{let t=i.indexOf(".");return t<0?0:i.length-1-t}},round:(t,i)=>(null==i&&(i=10),i=Math.min(Math.max(0,i),20),t=(+t).toFixed(i))};var n=class extends o{constructor(t,i){super(t,i),this.values=[],this.valueCount=0}computeAxisValues(t,i){let e=i-t;if(e<0)return this.values=[],void(this.valueCount=0);let a=+r.nice(e/5),s=r.getIntervalPrecision(a),o=+r.round(Math.ceil(t/a)*a,s),h=+r.round(Math.floor(i/a)*a,s),n=0,l=o;if(0!==a)for(;l<=+h;)++n,l+=a;this.valueCount=n,this.values=[];let d=0;for(l=o;d<n;)this.values[d]=l,l+=a,++d}};const l={NO:"NO",MA:"MA",VOL:"VOL",MACD:"MACD",BOLL:"BOLL",KDJ:"KDJ",KD:"KD",RSI:"RSI",BIAS:"BIAS",BRAR:"BRAR",CCI:"CCI",DMI:"DMI",CR:"CR",PSY:"PSY",DMA:"DMA",TRIX:"TRIX",OBV:"OBV",VR:"VR",WR:"WR",MTM:"MTM",EMV:"EMV",SAR:"SAR"};var d=class{constructor(){this.lineSize=1,this.increasingColor="#5DB300",this.decreasingColor="#FF4A4A",this.lineColors=["#898989","#F5A623","#F601FF","#1587DD","#50A300"]}};const c={DASH:"dash",SOLID:"solid"};var u=class{constructor(){this.display=!0,this.color="#707070",this.axisLine={display:!0,color:"#707070",size:1},this.tickText={display:!0,position:m.OUTSIDE,color:"#707070",size:12,margin:3,valueFormatter:null},this.tickLine={display:!0,size:3,color:"#707070"},this.separatorLine={display:!1,size:1,color:"#B8B8B8",style:c.DASH,dashValue:[8,8]}}};const x={LEFT:"left",RIGHT:"right"},m={OUTSIDE:"outside",INSIDE:"inside"};var g=class extends u{constructor(){super(),this.yAxisPosition=x.RIGHT,this.yAxisMaxWidth=80,this.yAxisMinWidth=40}needsOffset(){return((this.tickText.display||this.tickLine.display||this.tickText.margin>0)&&this.tickText.position===m.OUTSIDE||this.axisLine.display)&&this.display}getRequiredWidthSpace(){let t=0;if(this.tickText.position===m.OUTSIDE&&(t+=r.calcTextWidth(`${2*this.tickText.size}px Arial`,"0000000")+2*this.tickText.margin,this.display&&this.tickLine.display&&(t+=2*this.tickLine.size)),this.display&&this.axisLine.display&&(t+=this.axisLine.size),t===this.axisLine.size)return t;let i=t;return i>0&&(i=2*this.yAxisMaxWidth,t=Math.min(i,Math.max(t,2*this.yAxisMinWidth))),t}};var p=class extends n{constructor(t,i,e){super(i,e),this.axisMaximum=0,this.axisMinimum=0,this.axisRange=0,this.yAxis=t}drawAxisLine(t){this.yAxis.display&&this.yAxis.axisLine.display&&(t.strokeStyle=this.yAxis.axisLine.color||this.yAxis.color,t.lineWidth=this.yAxis.axisLine.size,t.beginPath(),this.yAxis.yAxisPosition===x.LEFT?(t.moveTo(this.viewPortHandler.contentLeft(),this.chartTop),t.lineTo(this.viewPortHandler.contentLeft(),this.chartTop+this.chartHeight)):(t.moveTo(this.viewPortHandler.contentRight(),this.chartTop),t.lineTo(this.viewPortHandler.contentRight(),this.chartTop+this.chartHeight)),t.stroke(),t.closePath())}drawAxisLabels(t){if(!this.yAxis.display||!this.yAxis.tickText.display)return;let i;i=this.yAxis.yAxisPosition===x.LEFT?this.yAxis.tickText.position===m.OUTSIDE?this.yAxis.display&&this.yAxis.tickLine.display?this.viewPortHandler.contentLeft()-2*this.yAxis.tickLine.size-2*this.yAxis.tickText.margin:this.viewPortHandler.contentLeft()-2*this.yAxis.tickText.margin:this.yAxis.display&&this.yAxis.tickLine.display?this.viewPortHandler.contentLeft()+2*this.yAxis.tickLine.size+2*this.yAxis.tickText.margin:this.viewPortHandler.contentLeft()+2*this.yAxis.tickText.margin:this.yAxis.tickText.position===m.OUTSIDE?this.yAxis.display&&this.yAxis.tickLine.display?this.viewPortHandler.contentRight()+2*this.yAxis.tickLine.size+2*this.yAxis.tickText.margin:this.viewPortHandler.contentRight()+2*this.yAxis.tickText.margin:this.yAxis.display&&this.yAxis.tickLine.display?this.viewPortHandler.contentRight()-2*this.yAxis.tickLine.size-2*this.yAxis.tickText.margin:this.viewPortHandler.contentRight()-2*this.yAxis.tickText.margin,t.textBaseline="middle",t.font=2*this.yAxis.tickText.size+"px Arial",t.fillStyle=this.yAxis.tickText.color||this.yAxis.color;let e=2*this.yAxis.tickText.size,a=this.yAxis.tickText.valueFormatter;for(let s=0;s<this.values.length;s++){let o=this.getValueY(this.values[s]),h=this.values[s].toString();a&&(h=a(this.values[s])||"--"),this.checkShowLabel(o,e)&&(this.yAxis.yAxisPosition===x.LEFT&&this.yAxis.tickText.position===m.OUTSIDE||this.yAxis.yAxisPosition===x.RIGHT&&this.yAxis.tickText.position!==m.OUTSIDE?t.textAlign="right":t.textAlign="left",t.fillText(h,i,o))}t.textAlign="left"}drawSeparatorLines(t){if(!this.yAxis.display||!this.yAxis.separatorLine.display)return;t.strokeStyle=this.yAxis.separatorLine.color||this.yAxis.color,t.lineWidth=this.yAxis.separatorLine.size;let i=2*this.yAxis.tickText.size;this.yAxis.separatorLine.style===c.DASH&&t.setLineDash(this.yAxis.separatorLine.dashValue);for(let e=0;e<this.values.length;e++){let a=this.getValueY(this.values[e]);this.checkShowLabel(a,i)&&(t.beginPath(),t.moveTo(this.viewPortHandler.contentLeft(),a),t.lineTo(this.viewPortHandler.contentRight(),a),t.stroke(),t.closePath())}t.setLineDash([])}drawTickLines(t){if(!this.yAxis.display||!this.yAxis.tickLine.display)return;t.lineWidth=1,t.strokeStyle=this.yAxis.axisLine.color||this.yAxis.color;let i,e,a=2*this.yAxis.tickText.size;this.yAxis.yAxisPosition===x.LEFT?(i=this.viewPortHandler.contentLeft(),e=this.yAxis.tickText.position===m.OUTSIDE?i-2*this.yAxis.tickLine.size:i+2*this.yAxis.tickLine.size):(i=this.viewPortHandler.contentRight(),e=this.yAxis.tickText.position===m.OUTSIDE?i+2*this.yAxis.tickLine.size:i-2*this.yAxis.tickLine.size);for(let s=0;s<this.values.length;s++){let o=this.getValueY(this.values[s]);this.checkShowLabel(o,a)&&(t.beginPath(),t.moveTo(i,o),t.lineTo(e,o),t.stroke(),t.closePath())}}checkShowLabel(t,i){return t>this.chartTop+i&&t<this.chartTop+this.chartHeight-i}getYAxisDataMinMax(t,i=!1,e=!1){let a=this.dataBounds.dataList,s=this.dataBounds.min,o=Math.min(s+this.dataBounds.range,a.length),h=[Number.MAX_VALUE,Number.MIN_VALUE];if(e)for(let r=s;r<o;r++){let t=a[r];h[0]=Math.min(t.averagePrice,h[0]),h[0]=Math.min(t.close,h[0]),h[1]=Math.max(t.averagePrice,h[1]),h[1]=Math.max(t.close,h[1])}else for(let r=s;r<o;r++){let e=a[r];this.calcIndexMinMax(e,t,h),i&&(h[0]=Math.min(e.low,h[0]),h[1]=Math.max(e.high,h[1]))}h[0]!==Number.MAX_VALUE&&h[1]!==Number.MIN_VALUE&&(this.axisMinimum=h[0],this.axisMaximum=h[1],this.computeAxis())}calcIndexMinMax(t,i,e){switch(i){case l.MA:e[0]=Math.min(t.ma.ma5,e[0]),e[0]=Math.min(t.ma.ma10,e[0]),e[0]=Math.min(t.ma.ma20,e[0]),e[0]=Math.min(t.ma.ma60,e[0]),e[1]=Math.max(t.ma.ma5,e[1]),e[1]=Math.max(t.ma.ma10,e[1]),e[1]=Math.max(t.ma.ma20,e[1]),e[1]=Math.max(t.ma.ma60,e[1]);break;case l.MACD:e[0]=Math.min(t.macd.dea,e[0]),e[0]=Math.min(t.macd.diff,e[0]),e[0]=Math.min(t.macd.macd,e[0]),e[1]=Math.max(t.macd.dea,e[1]),e[1]=Math.max(t.macd.diff,e[1]),e[1]=Math.max(t.macd.macd,e[1]);break;case l.VOL:e[0]=Math.min(t.vol.ma5,0),e[0]=Math.min(t.vol.ma10,0),e[0]=Math.min(t.vol.ma20,0),e[0]=Math.min(t.vol.num,0),e[1]=Math.max(t.vol.ma5,e[1]),e[1]=Math.max(t.vol.ma10,e[1]),e[1]=Math.max(t.vol.ma20,e[1]),e[1]=Math.max(t.vol.num,e[1]);break;case l.BOLL:e[0]=Math.min(t.boll.up,e[0]),e[0]=Math.min(t.boll.mid,e[0]),e[0]=Math.min(t.boll.dn,e[0]),e[0]=Math.min(t.low,e[0]),e[1]=Math.max(t.boll.up,e[1]),e[1]=Math.max(t.boll.mid,e[1]),e[1]=Math.max(t.boll.dn,e[1]),e[1]=Math.max(t.high,e[1]);break;case l.BIAS:e[0]=Math.min(t.bias.bias1,e[0]),e[0]=Math.min(t.bias.bias2,e[0]),e[0]=Math.min(t.bias.bias3,e[0]),e[1]=Math.max(t.bias.bias1,e[1]),e[1]=Math.max(t.bias.bias2,e[1]),e[1]=Math.max(t.bias.bias3,e[1]);break;case l.BRAR:e[0]=Math.min(t.brar.br,e[0]),e[0]=Math.min(t.brar.ar,e[0]),e[1]=Math.max(t.brar.br,e[1]),e[1]=Math.max(t.brar.ar,e[1]);break;case l.CCI:e[0]=Math.min(t.cci.cci,e[0]),e[1]=Math.max(t.cci.cci,e[1]);break;case l.CR:e[0]=Math.min(t.cr.cr,e[0]),e[0]=Math.min(t.cr.ma1,e[0]),e[0]=Math.min(t.cr.ma2,e[0]),e[0]=Math.min(t.cr.ma3,e[0]),e[0]=Math.min(t.cr.ma4,e[0]),e[1]=Math.max(t.cr.cr,e[1]),e[1]=Math.max(t.cr.ma1,e[1]),e[1]=Math.max(t.cr.ma2,e[1]),e[1]=Math.max(t.cr.ma3,e[1]),e[1]=Math.max(t.cr.ma4,e[1]);break;case l.DMA:e[0]=Math.min(t.dma.dif,e[0]),e[0]=Math.min(t.dma.difMa,e[0]),e[1]=Math.max(t.dma.dif,e[1]),e[1]=Math.max(t.dma.difMa,e[1]);break;case l.DMI:e[0]=Math.min(t.dmi.pdi,e[0]),e[0]=Math.min(t.dmi.mdi,e[0]),e[0]=Math.min(t.dmi.adx,e[0]),e[0]=Math.min(t.dmi.adxr,e[0]),e[1]=Math.max(t.dmi.pdi,e[1]),e[1]=Math.max(t.dmi.mdi,e[1]),e[1]=Math.max(t.dmi.adx,e[1]),e[1]=Math.max(t.dmi.adxr,e[1]);break;case l.KDJ:e[0]=Math.min(t.kdj.k,e[0]),e[0]=Math.min(t.kdj.d,e[0]),e[0]=Math.min(t.kdj.j,e[0]),e[1]=Math.max(t.kdj.k,e[1]),e[1]=Math.max(t.kdj.d,e[1]),e[1]=Math.max(t.kdj.j,e[1]);break;case l.KD:e[0]=Math.min(t.kdj.k,e[0]),e[0]=Math.min(t.kdj.d,e[0]),e[1]=Math.max(t.kdj.k,e[1]),e[1]=Math.max(t.kdj.d,e[1]);break;case l.RSI:e[0]=Math.min(t.rsi.rsi1,e[0]),e[0]=Math.min(t.rsi.rsi2,e[0]),e[0]=Math.min(t.rsi.rsi3,e[0]),e[1]=Math.max(t.rsi.rsi1,e[1]),e[1]=Math.max(t.rsi.rsi2,e[1]),e[1]=Math.max(t.rsi.rsi3,e[1]);break;case l.PSY:e[0]=Math.min(t.psy.psy,e[0]),e[1]=Math.max(t.psy.psy,e[1]);break;case l.TRIX:e[0]=Math.min(t.trix.trix,e[0]),e[0]=Math.min(t.trix.maTrix,e[0]),e[1]=Math.max(t.trix.trix,e[1]),e[1]=Math.max(t.trix.maTrix,e[1]);break;case l.OBV:e[0]=Math.min(t.obv.obv,e[0]),e[0]=Math.min(t.obv.maObv,e[0]),e[1]=Math.max(t.obv.obv,e[1]),e[1]=Math.max(t.obv.maObv,e[1]);break;case l.VR:e[0]=Math.min(t.vr.vr,e[0]),e[0]=Math.min(t.vr.maVr,e[0]),e[1]=Math.max(t.vr.vr,e[1]),e[1]=Math.max(t.vr.maVr,e[1]);break;case l.WR:e[0]=Math.min(t.wr.wr1,e[0]),e[0]=Math.min(t.wr.wr2,e[0]),e[0]=Math.min(t.wr.wr3,e[0]),e[1]=Math.max(t.wr.wr1,e[1]),e[1]=Math.max(t.wr.wr2,e[1]),e[1]=Math.max(t.wr.wr3,e[1]);break;case l.MTM:e[0]=Math.min(t.mtm.mtm,e[0]),e[0]=Math.min(t.mtm.mtmMa,e[0]),e[1]=Math.max(t.mtm.mtm,e[1]),e[1]=Math.max(t.mtm.mtmMa,e[1]);break;case l.EMV:e[0]=Math.min(t.emv.emv,e[0]),e[0]=Math.min(t.emv.maEmv,e[0]),e[1]=Math.max(t.emv.emv,e[1]),e[1]=Math.max(t.emv.maEmv,e[1]);break;case l.SAR:e[0]=Math.min(t.sar.sar,e[0]),e[1]=Math.max(t.sar.sar,e[1]),e[0]=Math.min(t.low,e[0]),e[1]=Math.max(t.high,e[1])}return e}computeAxis(){let t=this.axisMinimum,i=this.axisMaximum,e=Math.abs(i-t);0===e&&(i+=1,t-=1,e=Math.abs(i-t)),this.axisMinimum=t-e/100*10,this.axisMaximum=i+e/100*20,this.axisRange=Math.abs(this.axisMaximum-this.axisMinimum),this.computeAxisValues(this.axisMinimum,this.axisMaximum)}getValueY(t){return this.getY(t,this.axisMinimum,this.axisRange)}};var v=class extends o{constructor(t,i,e,a,s,o=l.MACD){super(a,s),this.indicator=t,this.xAxis=i,this.yAxisChart=new p(e,a,s),this.indicatorType=o}setChartDimens(t,i){super.setChartDimens(t,i),this.yAxisChart.setChartDimens(t,i)}draw(t){this.isDisplayChart()&&(this.drawChartHorizontalSeparatorLine(t),this.yAxisChart.getYAxisDataMinMax(this.indicatorType),this.yAxisChart.drawSeparatorLines(t),this.yAxisChart.drawTickLines(t),this.drawIndicator(t),this.yAxisChart.drawAxisLine(t),this.yAxisChart.drawAxisLabels(t))}drawChartHorizontalSeparatorLine(t){t.lineWidth=this.xAxis.axisLine.size,t.strokeStyle=this.xAxis.axisLine.color,t.beginPath(),t.moveTo(this.viewPortHandler.contentLeft(),this.chartTop),t.lineTo(this.viewPortHandler.contentRight(),this.chartTop),t.closePath(),t.stroke()}drawIndicator(t,i=!1){switch(this.indicatorType){case l.MA:this.drawLines(t,"ma",["ma5","ma10","ma20","ma60"]);break;case l.MACD:this.drawBarLines(t,"macd","macd",["diff","dea"],(i,e,a)=>{let s=(i.macd||{}).macd,o=((e||{}).macd||{}).macd;s>0?(t.strokeStyle=this.indicator.increasingColor,t.fillStyle=this.indicator.increasingColor):(t.strokeStyle=this.indicator.decreasingColor,t.fillStyle=this.indicator.decreasingColor),(o||0===o)&&s>o?t.strokeRect(a[0],a[1],a[2]-a[0],a[3]-a[1]):t.fillRect(a[0],a[1],a[2]-a[0],a[3]-a[1])});break;case l.VOL:this.drawBarLines(t,"vol","num",["ma5","ma10","ma20"],(i,e,a)=>{let s=i.close,o=(e||{}).close;t.fillStyle=(o||0===o)&&s>o?this.indicator.increasingColor:this.indicator.decreasingColor,t.fillRect(a[0],a[1],a[2]-a[0],a[3]-a[1])});break;case l.BOLL:this.drawLines(t,"boll",["up","mid","dn"],(e,a)=>{let s=this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate)/2;this.drawOhlc(t,s,e,a,i)});break;case l.BIAS:this.drawLines(t,"bias",["bias1","bias2","bias3"]);break;case l.BRAR:this.drawLines(t,"brar",["br","ar"]);break;case l.CCI:this.drawLines(t,"cci",["cci"]);break;case l.CR:this.drawLines(t,"cr",["cr","ma1","ma2","ma3","ma4"]);break;case l.DMA:this.drawLines(t,"dma",["dif","difMa"]);break;case l.DMI:this.drawLines(t,"dmi",["mdi","pdi","adx","adxr"]);break;case l.KDJ:this.drawLines(t,"kdj",["k","d","j"]);break;case l.KD:this.drawLines(t,"kdj",["k","d"]);break;case l.RSI:this.drawLines(t,"rsi",["rsi1","rsi2","rsi3"]);break;case l.PSY:this.drawLines(t,"psy",["psy"]);break;case l.TRIX:this.drawLines(t,"trix",["trix","maTrix"]);break;case l.OBV:this.drawLines(t,"obv",["obv","maObv"]);break;case l.VR:this.drawLines(t,"vr",["vr","maVr"]);break;case l.WR:this.drawLines(t,"wr",["wr1","wr2","wr3"]);break;case l.MTM:this.drawLines(t,"mtm",["mtm","mtmMa"]);break;case l.EMV:this.drawLines(t,"emv",["emv","maEmv"]);break;case l.SAR:this.drawSar(t,i)}}drawSar(t,i){t.save(),t.beginPath(),t.rect(this.viewPortHandler.contentLeft(),this.chartTop,this.viewPortHandler.contentRight()-this.viewPortHandler.contentLeft(),this.viewPortHandler.contentBottom()-this.chartTop),t.closePath(),t.clip(),t.lineWidth=1;let e=this.viewPortHandler.contentLeft(),a=this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate),s=a/2,o=this.dataBounds.min;for(;o<this.dataBounds.dataList.length&&o<this.dataBounds.min+this.dataBounds.range;){let h=(e+(e+a))/2,r=this.dataBounds.dataList[o];this.drawOhlc(t,s,h,r,i);let n=r.sar.sar;if(n||0===n){let i=this.getValueY(n);n<(r.high+r.low)/2?t.strokeStyle=this.indicator.increasingColor:t.strokeStyle=this.indicator.decreasingColor,t.beginPath(),t.arc(h,i,s,2*Math.PI,0,!0),t.stroke(),t.closePath()}e+=this.dataBounds.dataSpace,++o}t.restore()}drawBarLines(t,i,e,a,s){let o=this.viewPortHandler.contentLeft(),h=this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate),r=h/2,n=this.dataBounds.min,l=[],d=[];for(;n<this.dataBounds.dataList.length&&n<this.dataBounds.min+this.dataBounds.range;){let t,c=(o+(o+h))/2,u=this.dataBounds.dataList[n];n>0&&(t=this.dataBounds.dataList[n-1]);let x=u[i],m=x[e];if(m||0===m){l[0]=c-r,l[2]=c+r;let i=this.getValueY(m),e=this.getValueY(0);l[1]=i,l[3]=e,s(u,t,l)}for(let i=0;i<a.length;i++){let t=x[a[i]],e=this.getValueY(t);d[i]?d[i].push({x:c,y:e}):d[i]=[{x:c,y:e}]}o+=this.dataBounds.dataSpace,++n}this.drawLine(t,d)}drawLines(t,i,e,a){let s=this.viewPortHandler.contentLeft(),o=this.dataBounds.min,h=this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate),r=[];for(;o<this.dataBounds.dataList.length&&o<this.dataBounds.min+this.dataBounds.range;){let t=(s+(s+h))/2,n=this.dataBounds.dataList[o];a&&a(t,n);let l=n[i];for(let i=0;i<e.length;i++){let a=l[e[i]],s=this.getValueY(a);r[i]?r[i].push({x:t,y:s}):r[i]=[{x:t,y:s}]}s+=this.dataBounds.dataSpace,++o}this.drawLine(t,r)}drawLine(t,i){for(let e=0;e<i.length;e++){let a=i[e];if(a.length>0){t.strokeStyle=this.indicator.lineColors[e],t.beginPath(),t.moveTo(a[0].x,a[0].y);for(let i=1;i<a.length;i++)t.lineTo(a[i].x,a[i].y);t.stroke(),t.closePath()}}}drawOhlc(t,i,e,a,s){if(!s){let s=this.getValueY(a.open),o=this.getValueY(a.close),h=this.getValueY(a.high),r=this.getValueY(a.low);a.close>a.open?t.strokeStyle=this.indicator.increasingColor:t.strokeStyle=this.indicator.decreasingColor,this.drawOhlcLines(t,i,e,s,o,h,r)}}drawOhlcLines(t,i,e,a,s,o,h){t.beginPath(),t.moveTo(e,o),t.lineTo(e,h),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(e-i,a),t.lineTo(e,a),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(e+i,s),t.lineTo(e,s),t.stroke(),t.closePath()}getValueY(t){return this.getY(t,this.yAxisChart.axisMinimum,this.yAxisChart.axisRange)}isDisplayChart(){return this.indicatorType!==l.NO}};const y={SOLID:"solid",STROKE:"stroke",INCREASING_STROKE:"increasing_stroke",DECREASING_STROKE:"decreasing_stroke",OHLC:"ohlc"},L={CANDLE:"candle",TIME_LINE:"time_line"};var M=class{constructor(){this.chartStyle=L.CANDLE,this.timeChart={timeLineSize:1,timeLineColor:"#D8D8D8",timeLineFillColor:"#f4f4f4",timeAverageLineColor:"#F5A623"},this.candleChart={candleStyle:y.SOLID,increasingColor:"#5DB300",decreasingColor:"#FF4A4A"},this.lowestHighestPriceMarkTextColor="#898989",this.lowestHighestPriceMarkTextSize=10,this.lowestHighestValueFormatter=null,this.highestPriceMark={display:!0,color:"#898989",textSize:10,valueFormatter:null},this.lowestPriceMark={display:!0,color:"#898989",textSize:10,valueFormatter:null},this.lastPriceMark={display:!0,lineStyle:c.DASH,dashValue:[8,8],lineSize:1,lineColor:"#B9B9B9"}}};var w=class extends v{constructor(t,i,e,a,s){super(i,null,e,a,s),this.candle=t,this.indicatorType=l.MA,this.highestMarkData={},this.lowestMarkData={}}draw(t){let i=this.candle.chartStyle===L.TIME_LINE;this.yAxisChart.getYAxisDataMinMax(this.indicatorType,!0,i),this.yAxisChart.drawSeparatorLines(t),this.yAxisChart.drawTickLines(t),i?this.drawTimeLine(t):(this.drawCandle(t),this.drawIndicator(t,!0),this.drawHighestPriceMark(t),this.drawLowestPriceMark(t)),this.drawLastPriceMark(t),this.yAxisChart.drawAxisLine(t),this.yAxisChart.drawAxisLabels(t)}drawCandle(t){t.lineWidth=1;let i=this.dataBounds.dataList,e=this.viewPortHandler.contentLeft(),a=this.dataBounds.min,s=this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate),o=s/2,h=[],r=Number.MIN_VALUE,n=-1,l=Number.MAX_VALUE,d=-1;for(;a<i.length&&a<this.dataBounds.min+this.dataBounds.range;){let c=e+s,u=(e+c)/2,x=i[a],m=x.high,g=x.low;r<m&&(r=m,n=u),g<l&&(l=g,d=u);let p=this.getValueY(x.open),v=this.getValueY(x.close),L=this.getValueY(m),M=this.getValueY(g);if(x.close>x.open?(t.strokeStyle=this.candle.candleChart.increasingColor,t.fillStyle=this.candle.candleChart.increasingColor):(t.strokeStyle=this.candle.candleChart.decreasingColor,t.fillStyle=this.candle.candleChart.decreasingColor),this.candle.candleChart.candleStyle!==y.OHLC){let i=[],a=[];switch(p>v?(i[0]=L,i[1]=v,a[0]=p,a[1]=M,h=[e,v,c-e,p-v]):p<v?(i[0]=L,i[1]=p,a[0]=v,a[1]=M,h=[e,p,c-e,v-p]):(i[0]=L,i[1]=p,a[0]=v,a[1]=M,h=[e,p,c-e,1]),t.beginPath(),t.moveTo(u,i[0]),t.lineTo(u,i[1]),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(u,a[0]),t.lineTo(u,a[1]),t.stroke(),t.closePath(),this.candle.candleChart.candleStyle){case y.SOLID:t.fillRect(h[0],h[1],h[2],h[3]);break;case y.STROKE:t.strokeRect(h[0],h[1],h[2],h[3]);break;case y.INCREASING_STROKE:x.close>x.open?t.strokeRect(h[0],h[1],h[2],h[3]):t.fillRect(h[0],h[1],h[2],h[3]);break;case y.DECREASING_STROKE:x.close>x.open?t.fillRect(h[0],h[1],h[2],h[3]):t.strokeRect(h[0],h[1],h[2],h[3])}}else this.drawOhlcLines(t,o,u,p,v,L,M);e+=this.dataBounds.dataSpace,++a}this.highestMarkData={x:n,price:r},this.lowestMarkData={x:d,price:l}}drawHighestPriceMark(t){let i=this.highestMarkData.price;if(i===Number.MIN_VALUE||!this.candle.highestPriceMark.display)return;let e=this.candle.highestPriceMark.color||this.candle.lowestHighestPriceMarkTextColor,a=this.candle.highestPriceMark.textSize||this.candle.lowestHighestPriceMarkTextSize,s=this.candle.highestPriceMark.valueFormatter||this.candle.lowestHighestValueFormatter;this.drawLowestHighestPriceMark(t,this.highestMarkData.x,i,e,a,s,!0)}drawLowestPriceMark(t){let i=this.lowestMarkData.price;if(i===Number.MAX_VALUE||!this.candle.lowestPriceMark.display)return;let e=this.candle.lowestPriceMark.color||this.candle.lowestHighestPriceMarkTextColor,a=this.candle.lowestPriceMark.textSize||this.candle.lowestHighestPriceMarkTextSize,s=this.candle.lowestPriceMark.valueFormatter||this.candle.lowestHighestValueFormatter;this.drawLowestHighestPriceMark(t,this.lowestMarkData.x,i,e,a,s)}drawLowestHighestPriceMark(t,i,e,a,s,o,h=!1){t.save(),t.beginPath(),t.rect(this.viewPortHandler.contentLeft(),this.viewPortHandler.contentTop(),this.viewPortHandler.contentRight()-this.viewPortHandler.contentLeft(),this.chartTop+this.chartHeight),t.closePath(),t.clip();let r=i,n=this.getValueY(e)+(h?-4:4);t.textAlign="left",t.lineWidth=1,t.strokeStyle=a,t.fillStyle=a,t.beginPath(),t.moveTo(r,n),t.lineTo(r-4,n+(h?-4:4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(r,n),t.lineTo(r+4,n+(h?-4:4)),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(r,n),n+=h?-10:10,t.lineTo(r,n),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(r,n),t.lineTo(r+10,n),t.stroke(),t.closePath(),t.font=2*s+"px Arial";let l=e.toFixed(2);o&&(l=o(e)+""),t.textBaseline="middle",t.fillText(l,r+14,n),t.restore()}drawLastPriceMark(t){if(!this.candle.lastPriceMark.display||0===this.dataBounds.dataList.length)return;let i=this.dataBounds.dataList[this.dataBounds.dataList.length-1].close,e=this.getValueY(i);e=Math.max(this.chartTop+.05*this.chartHeight,Math.min(e,this.chartTop+.98*this.chartHeight)),t.strokeStyle=this.candle.lastPriceMark.lineColor,t.lineWidth=this.candle.lastPriceMark.lineSize,this.candle.lastPriceMark.lineStyle===c.DASH&&t.setLineDash(this.candle.lastPriceMark.dashValue),t.beginPath(),t.moveTo(this.viewPortHandler.contentLeft(),e),t.lineTo(this.viewPortHandler.contentRight(),e),t.stroke(),t.closePath(),t.setLineDash([])}drawTimeLine(t){let i=[],e=[{x:this.viewPortHandler.contentLeft(),y:this.chartTop+this.chartHeight}],a=[];t.lineWidth=this.candle.timeChart.timeLineSize;let s=this.dataBounds.dataList,o=this.viewPortHandler.contentLeft(),h=this.dataBounds.min,r=this.dataBounds.dataSpace-this.dataBounds.dataMarginSpaceRate*this.dataBounds.dataSpace;for(;h<this.dataBounds.dataList.length&&h<this.dataBounds.min+this.dataBounds.range;){let t=(o+(o+r))/2,n=s[h],l=this.getValueY(n.close),d=this.getValueY(n.averagePrice);i.push({x:t,y:l}),n.averagePrice&&a.push({x:t,y:d}),h===this.dataBounds.min?(e.push({x:this.viewPortHandler.contentLeft(),y:l}),e.push({x:t,y:l})):h===this.dataBounds.min+this.dataBounds.range-1?(e.push({x:t,y:l}),e.push({x:this.viewPortHandler.contentRight(),y:l}),e.push({x:this.viewPortHandler.contentRight(),y:this.chartHeight+this.chartTop})):h===this.dataBounds.dataList.length-1?(e.push({x:t,y:l}),e.push({x:t,y:this.chartTop+this.chartHeight})):e.push({x:t,y:l}),o+=this.dataBounds.dataSpace,++h}if(i.length>0){t.strokeStyle=this.candle.timeChart.timeLineColor,t.beginPath(),t.moveTo(i[0].x,i[0].y);for(let e=1;e<i.length;e++)t.lineTo(i[e].x,i[e].y);t.stroke(),t.closePath()}if(e.length>0){t.fillStyle=this.candle.timeChart.timeLineFillColor,t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fill()}if(a.length>0){t.strokeStyle=this.candle.timeChart.timeAverageLineColor,t.beginPath(),t.moveTo(a[0].x,a[0].y);for(let i=1;i<a.length;i++)t.lineTo(a[i].x,a[i].y);t.stroke(),t.closePath()}}};var f=class extends n{constructor(t,i,e){super(i,e),this.xAxis=t}draw(t){this.computeAxis(),this.drawAxisLine(t),this.drawTickLines(t),this.drawAxisLabels(t),this.drawSeparatorLines(t)}drawAxisLine(t){this.xAxis.display&&this.xAxis.axisLine.display&&(t.strokeStyle=this.xAxis.axisLine.color||this.xAxis.color,t.lineWidth=this.xAxis.axisLine.size,t.beginPath(),t.moveTo(this.viewPortHandler.contentLeft(),this.viewPortHandler.contentBottom()),t.lineTo(this.viewPortHandler.contentRight(),this.viewPortHandler.contentBottom()),t.stroke(),t.closePath())}drawAxisLabels(t){if(!this.xAxis.display||!this.xAxis.tickText.display)return;t.textBaseline="top",t.font=2*this.xAxis.tickText.size+"px Arial",t.textAlign="center",t.fillStyle=this.xAxis.tickText.color||this.xAxis.color;let i=this.pointValuesToPixel(),e=this.viewPortHandler.contentBottom()+2*this.xAxis.tickText.margin;this.display&&this.xAxis.tickLine.display&&(e+=2*this.xAxis.tickLine.size);let a=this.xAxis.tickText.valueFormatter;for(let s=0;s<i.length;s+=2){let o=i[s];if(this.viewPortHandler.isInBoundsX(o)){let i=this.dataBounds.dataList[parseInt(this.values[s/2])],h=i.timestamp,n=r.formatDate(h);a&&(n=a(i)),t.fillText(n,o,e)}}}drawSeparatorLines(t){if(!this.xAxis.display||!this.xAxis.separatorLine.display)return;t.strokeStyle=this.xAxis.separatorLine.color||this.xAxis.color,t.lineWidth=this.xAxis.separatorLine.size,this.xAxis.separatorLine.style===c.DASH&&t.setLineDash(this.xAxis.separatorLine.dashValue);let i=this.pointValuesToPixel();for(let e=0;e<i.length;e+=2){let a=i[e];this.viewPortHandler.isInBoundsX(a)&&(t.beginPath(),t.moveTo(a,this.viewPortHandler.contentTop()),t.lineTo(a,this.viewPortHandler.contentBottom()),t.stroke(),t.closePath())}t.setLineDash([])}drawTickLines(t){if(!this.xAxis.display||!this.xAxis.tickLine.display)return;t.lineWidth=1,t.strokeStyle=this.xAxis.axisLine.color||this.xAxis.color;let i=this.pointValuesToPixel(),e=this.viewPortHandler.contentBottom(),a=e+2*this.xAxis.tickLine.size;for(let s=0;s<i.length;s+=2){let o=i[s];this.viewPortHandler.isInBoundsX(o)&&(t.beginPath(),t.moveTo(o,e),t.lineTo(o,a),t.stroke(),t.closePath())}}pointValuesToPixel(){let t=[];for(let i=0;i<2*this.valueCount;i+=2){let e=this.values[i/2];t[i]=(e-this.dataBounds.min)*this.dataBounds.dataSpace+this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate)/2}return t}computeAxis(){let t=this.dataBounds.min,i=Math.min(t+this.dataBounds.range-1,this.dataBounds.dataList.length-1);this.computeAxisValues(t,i)}};const P={ALWAYS:"always",FOLLOW_CROSS:"follow_cross",NONE:"none"};var C=class{constructor(){this.textSize=12,this.crossLine={style:c.SOLID,dashValue:[8,8],size:1,color:"#505050",text:{color:"#EDEDED",size:12,rectStrokeLineSize:1,rectStrokeLineColor:"#EDEDED",rectFillColor:"#505050",margin:4,valueFormatter:null}},this.generalData={labels:["\u65f6\u95f4","\u5f00","\u6536","\u9ad8","\u4f4e"],values:null,valueFormatter:null,text:{size:12,color:"#898989",margin:20}},this.indicatorData={displayRule:P.ALWAYS,valueFormatter:null,text:{size:12,margin:20}}}};var k=class extends o{constructor(t,i,e,a,s,o,h,r,n){super(r,n),this.displayCross=!1,this.crossPoint={x:0,y:0},this.tooltip=t,this.candle=i,this.indicator=e,this.yAxis=a,this.candleChart=s,this.volChart=o,this.indicatorChart=h,this.yAxisLabelStrokePathPoints=[]}draw(t){if(this.dataBounds.currentDataPos<this.dataBounds.dataList.length){let i=this.dataBounds.dataList[this.dataBounds.currentDataPos];if(this.displayCross&&(this.crossPoint.x=this.viewPortHandler.contentLeft()+this.dataBounds.dataSpace*(this.dataBounds.currentDataPos-this.dataBounds.min)+this.dataBounds.dataSpace*(1-this.dataBounds.dataMarginSpaceRate)/2,t.font=2*(this.tooltip.crossLine.text.size||this.tooltip.textSize)+"px Arial",this.drawCrossHorizontalLine(t),this.drawCrossVerticalLine(t,i)),this.tooltip.indicatorData.displayRule===P.ALWAYS||this.tooltip.indicatorData.displayRule===P.FOLLOW_CROSS&&this.displayCross){let e=2*(this.tooltip.indicatorData.text.size||this.tooltip.textSize),a=this.viewPortHandler.contentLeft()+10;t.font=e+"px Arial",t.textBaseline="top",this.drawGeneralDataTooltip(t,a,i),this.candle.chartStyle!==L.TIME_LINE&&this.drawIndicatorTooltip(t,a,this.candleChart.chartTop+4+e+10,i,this.candleChart.indicatorType),this.drawIndicatorTooltip(t,a,this.volChart.chartTop+4,i,this.volChart.indicatorType),this.drawIndicatorTooltip(t,a,this.indicatorChart.chartTop+4,i,this.indicatorChart.indicatorType)}}}drawCrossHorizontalLine(t){let i=this.getCrossYAxisLabel();if(null==i)return;let e,a=this.yAxis.tickText.position===m.OUTSIDE,s=this.tooltip.crossLine.text.size||this.tooltip.textSize,o=r.calcTextWidth(2*s+"px Arial",i),h=s,n=this.crossPoint.y,l=this.viewPortHandler.contentLeft(),d=this.viewPortHandler.contentRight(),u=this.viewPortHandler.getContentCenter(),g=this.tooltip.crossLine.text.margin,p=this.tooltip.crossLine.text.rectStrokeLineSize;a?e=this.yAxis.yAxisPosition===x.LEFT?l-p-2*g-o:d+p+2*g:this.crossPoint.x>u.x?(l=this.viewPortHandler.contentLeft()+2*p+3*g+o,e=this.viewPortHandler.contentLeft()+p+g):e=(d=this.viewPortHandler.contentRight()-2*p-3*g-o)+p+2*g,!a&&this.crossPoint.x>u.x||a&&this.yAxis.yAxisPosition===x.LEFT?(this.yAxisLabelStrokePathPoints[0]={x:l,y:this.crossPoint.y},this.yAxisLabelStrokePathPoints[1]={x:l-g,y:this.crossPoint.y-h-g},this.yAxisLabelStrokePathPoints[2]={x:l-3*g-o,y:this.yAxisLabelStrokePathPoints[1].y},this.yAxisLabelStrokePathPoints[3]={x:this.yAxisLabelStrokePathPoints[2].x,y:this.crossPoint.y+h+g},this.yAxisLabelStrokePathPoints[4]={x:this.yAxisLabelStrokePathPoints[1].x,y:this.yAxisLabelStrokePathPoints[3].y}):(this.yAxisLabelStrokePathPoints[0]={x:d,y:this.crossPoint.y},this.yAxisLabelStrokePathPoints[1]={x:d+g,y:this.crossPoint.y-h-g},this.yAxisLabelStrokePathPoints[2]={x:d+3*g+o,y:this.yAxisLabelStrokePathPoints[1].y},this.yAxisLabelStrokePathPoints[3]={x:this.yAxisLabelStrokePathPoints[2].x,y:this.crossPoint.y+h+g},this.yAxisLabelStrokePathPoints[4]={x:this.yAxisLabelStrokePathPoints[1].x,y:this.yAxisLabelStrokePathPoints[3].y}),t.lineWidth=this.tooltip.crossLine.size,t.strokeStyle=this.tooltip.crossLine.color,this.tooltip.crossLine.style===c.DASH&&t.setLineDash(this.tooltip.crossLine.dashValue),t.beginPath(),t.moveTo(l,this.crossPoint.y),t.lineTo(d,this.crossPoint.y),t.stroke(),t.closePath(),t.setLineDash([]),t.fillStyle=this.tooltip.crossLine.text.rectFillColor,t.beginPath(),t.moveTo(this.yAxisLabelStrokePathPoints[0].x,this.yAxisLabelStrokePathPoints[0].y);for(let r=1;r<this.yAxisLabelStrokePathPoints.length;r++)t.lineTo(this.yAxisLabelStrokePathPoints[r].x,this.yAxisLabelStrokePathPoints[r].y);t.closePath(),t.fill(),t.lineWidth=this.tooltip.crossLine.text.rectStrokeLineSize,t.strokeStyle=this.tooltip.crossLine.text.rectStrokeLineColor,t.beginPath(),t.moveTo(this.yAxisLabelStrokePathPoints[0].x,this.yAxisLabelStrokePathPoints[0].y);for(let r=1;r<this.yAxisLabelStrokePathPoints.length;r++)t.lineTo(this.yAxisLabelStrokePathPoints[r].x,this.yAxisLabelStrokePathPoints[r].y);t.closePath(),t.stroke(),t.textBaseline="middle",t.fillStyle=this.tooltip.crossLine.text.color,t.fillText(i,e,n)}getCrossYAxisLabel(){let t=this.candleChart.yAxisChart,i=t.chartHeight,e=t.chartTop,a=this.volChart.yAxisChart,s=a.chartHeight,o=a.chartTop,h=this.indicatorChart.yAxisChart,r=h.chartHeight,n=h.chartTop,d=this.crossPoint.y;if(d>e&&d<i+e){let a=t.axisMinimum,s=(1-(d-e)/i)*(t.axisMaximum-a)+a,o=s.toFixed(2);return this.tooltip.crossLine.text.valueFormatter&&(o=this.tooltip.crossLine.text.valueFormatter("y",s)||"--"),o}if(d>o&&d<o+s){let t=a.axisMinimum,i=(1-(d-o)/s)*(a.axisMaximum-t)+t,e=i.toFixed(0);return this.tooltip.crossLine.text.valueFormatter&&(e=this.tooltip.crossLine.text.valueFormatter("y",i)||"--"),e}if(d>n&&d<n+r){let t=h.axisMinimum,i=(1-(d-n)/r)*(h.axisMaximum-t)+t,e=i.toFixed(2);return this.indicatorChart.indicatorType===l.VOL&&(e=i.toFixed(0)),this.tooltip.crossLine.text.valueFormatter&&(e=this.tooltip.crossLine.text.valueFormatter("y",i)||"--"),e}return null}drawCrossVerticalLine(t,i){t.lineWidth=this.tooltip.crossLine.size,t.strokeStyle=this.tooltip.crossLine.color,this.tooltip.crossLine.style===c.DASH&&t.setLineDash(this.tooltip.crossLine.dashValue),t.beginPath(),t.moveTo(this.crossPoint.x,this.viewPortHandler.contentTop()),t.lineTo(this.crossPoint.x,this.viewPortHandler.contentBottom()),t.stroke(),t.closePath(),t.setLineDash([]);let e=i.timestamp,a=r.formatDate(e);this.tooltip.crossLine.text.valueFormatter&&(a=this.tooltip.crossLine.text.valueFormatter("x",i)||"--");let s=this.tooltip.crossLine.text.size||this.tooltip.textSize,o=r.calcTextWidth(2*s+"px Arial",a),h=this.crossPoint.x-o/2,n=this.tooltip.crossLine.text.margin,l=this.tooltip.crossLine.text.rectStrokeLineSize;h<this.viewPortHandler.contentLeft()+n+l?h=this.viewPortHandler.contentLeft():h>this.viewPortHandler.contentRight()-o-l&&(h=this.viewPortHandler.contentRight()-o-l);let d=h-l-n,u=this.viewPortHandler.contentBottom(),x=h+o+n+l,m=this.viewPortHandler.contentBottom()+2*s+l+2*n;t.fillStyle=this.tooltip.crossLine.text.rectFillColor,t.fillRect(d,u,x-d,m-u),t.lineWidth=l,t.strokeStyle=this.tooltip.crossLine.text.rectStrokeLineColor,t.strokeRect(d,u,x-d,m-u),t.textBaseline="top",t.fillStyle=this.tooltip.crossLine.text.color,t.fillText(a,h,this.viewPortHandler.contentBottom()+l+n)}drawGeneralDataTooltip(t,i,e){let a=this.tooltip.generalData.text.size||this.tooltip.textSize;t.font=2*a+"px Arial";let s=this.tooltip.generalData.text.color,o=[];if(this.tooltip.generalData.values)o=this.tooltip.generalData.values(e)||[];else{let t=this.tooltip.generalData.valueFormatter,i=r.formatDate(e.timestamp),a=e.open.toFixed(2),s=e.close.toFixed(2),h=e.high.toFixed(2),n=e.low.toFixed(2);t&&(i=t(0,e.timestamp)||"--",a=t(1,e.open)||"--",s=t(2,e.close)||"--",h=t(3,e.high)||"--",n=t(4,e.low)||"--"),o=[i,a,s,h,n]}let h=this.tooltip.generalData.labels;for(let n=0;n<h.length;n++){let e=(h[n]||"--")+": ",l=r.calcTextWidth(2*a+"px Arial",e);t.fillStyle=s,t.fillText(e,i,4),i+=l;let d,c=o[n]||"--";"object"===typeof c?(d=c.value||"--",t.fillStyle=c.color||s):(t.fillStyle=s,d=c);let u=r.calcTextWidth(2*a+"px Arial",d);t.fillText(d,i,4),i+=u+this.tooltip.generalData.text.margin}}drawIndicatorTooltip(t,i,e,a,s){switch(s){case l.MA:{let s=a.ma;this.drawIndicatorTooltipLabels(t,i,e,[s.ma5,s.ma10,s.ma20,s.ma60],["MA5","MA10","MA20","MA60"],a,l.MA);break}case l.MACD:{let s=a.macd;this.drawIndicatorTooltipLabels(t,i,e,[s.diff,s.dea,s.macd],["DIFF","DEA","MACD"],a,l.MACD);break}case l.VOL:{let s=a.vol;this.drawIndicatorTooltipLabels(t,i,e,[s.ma5,s.ma10,s.ma20,s.num],["MA5","MA10","MA20","VOLUME"],a,l.VOL);break}case l.BOLL:{let s=a.boll;this.drawIndicatorTooltipLabels(t,i,e,[s.up,s.mid,s.dn],["UP","MID","DN"],a,l.BOLL);break}case l.BIAS:{let s=a.bias;this.drawIndicatorTooltipLabels(t,i,e,[s.bias1,s.bias2,s.bias3],["BIAS6","BIAS12","BIAS24"],a,l.BIAS);break}case l.BRAR:{let s=a.brar;this.drawIndicatorTooltipLabels(t,i,e,[s.br,s.ar],["BR","AR"],a,l.BRAR);break}case l.CCI:{let s=a.cci;this.drawIndicatorTooltipLabels(t,i,e,[s.cci],["CCI"],a,l.CCI);break}case l.CR:{let s=a.cr;this.drawIndicatorTooltipLabels(t,i,e,[s.cr,s.ma1,s.ma2,s.ma3,s.ma4],["CR","MA1","MA2","MA3","MA4"],a,l.CR);break}case l.DMA:{let s=a.dma;this.drawIndicatorTooltipLabels(t,i,e,[s.dif,s.difMa],["DIF","DIFMA"],a,l.DMA);break}case l.DMI:{let s=a.dmi;this.drawIndicatorTooltipLabels(t,i,e,[s.mdi,s.pdi,s.adx,s.adxr],["MDI","PDI","ADX","ADXR"],a,l.DMI);break}case l.KDJ:{let s=a.kdj;this.drawIndicatorTooltipLabels(t,i,e,[s.k,s.d,s.j],["K","D","J"],a,l.KDJ);break}case l.KD:{let s=a.kdj;this.drawIndicatorTooltipLabels(t,i,e,[s.k,s.d],["K","D"],a,l.KDJ);break}case l.RSI:{let s=a.rsi;this.drawIndicatorTooltipLabels(t,i,e,[s.rsi1,s.rsi2,s.rsi3],["RSI6","RSI12","RSI24"],a,l.RSI);break}case l.PSY:{let s=a.psy;this.drawIndicatorTooltipLabels(t,i,e,[s.psy],["PSY"],a,l.PSY);break}case l.TRIX:{let s=a.trix;this.drawIndicatorTooltipLabels(t,i,e,[s.trix,s.maTrix],["TRIX","MATRIX"],a,l.TRIX);break}case l.OBV:{let s=a.obv;this.drawIndicatorTooltipLabels(t,i,e,[s.obv,s.maObv],["OBV","MAOBV"],a,l.OBV);break}case l.VR:{let s=a.vr;this.drawIndicatorTooltipLabels(t,i,e,[s.vr,s.maVr],["VR","MAVR"],a,l.VR);break}case l.WR:{let s=a.wr;this.drawIndicatorTooltipLabels(t,i,e,[s.wr1,s.wr2,s.wr3],["WR1","WR2","WR3"],a,l.WR);break}case l.MTM:{let s=a.mtm;this.drawIndicatorTooltipLabels(t,i,e,[s.mtm,s.mtmMa],["MTM","MTMMA"],a,l.MTM);break}case l.EMV:{let s=a.emv;this.drawIndicatorTooltipLabels(t,i,e,[s.emv,s.maEmv],["EMV","MAEMV"],a,l.EMV);break}case l.SAR:{let s=a.sar;this.drawIndicatorTooltipLabels(t,i,e,[s.sar],["SAR"],a,l.SAR);break}}}drawIndicatorTooltipLabels(t,i,e,a,s,o,h){let n=i;for(let d=0;d<a.length;d++){let i=a[d],o="--";(i||0===i)&&(o=h===l.VOL?i.toFixed(0):i.toFixed(2)),this.tooltip.indicatorData.valueFormatter&&(o=this.tooltip.indicatorData.valueFormatter(h,i)||"--");let c=s[d]+": "+o,u=r.calcTextWidth(2*(this.tooltip.indicatorData.text.size||this.tooltip.textSize)+"px Arial",c);t.fillStyle=this.indicator.lineColors[d],t.fillText(c,n,e),n+=this.tooltip.indicatorData.text.margin+u}}setCross(t,i){this.crossPoint.y=t,this.displayCross=i}};var A=class extends u{constructor(){super(),this.xAxisMaxHeight=20,this.xAxisMinHeight=20}getRequiredHeightSpace(){let t=2*this.tickText.size+2*this.tickText.margin;this.display&&this.tickLine.display&&(t+=2*this.tickLine.size),this.display&&this.axisLine.display&&(t+=this.axisLine.size);let i=t;return this.xAxisMaxHeight>0&&(i=2*this.xAxisMaxHeight),t=Math.max(2*this.xAxisMinHeight,Math.min(t,i))}};var b=class{constructor(){this.display=!1,this.lineSize=1,this.lineColor="#707070"}};var T=class{constructor(t,i,e){this.kline=t,this.dataBounds=i,this.viewPortHandler=e}isValidEvent(t){return!(t.x<this.viewPortHandler.contentLeft()||t.x>this.viewPortHandler.contentRight()||t.y<this.viewPortHandler.contentTop()||t.y>this.viewPortHandler.contentBottom())}getCanvasPoint(t){let i=this.kline.tooltipCanvasDom.getBoundingClientRect();return{x:2*Math.round(t.clientX-i.left),y:2*Math.round(t.clientY-i.top)}}};const B="cross",S="drag";var D=class extends T{constructor(t,i,e){super(t,i,e),this.mouseMode=B,this.mouseDownPoint={x:0,y:0}}mouseDown(t){t.preventDefault();let i=this.getCanvasPoint(t);this.isValidEvent(i)&&(this.mouseMode=S,this.mouseDownPoint.x=t.x,this.mouseDownPoint.y=t.y,this.kline.tooltipChart.setCross(i.y,!1),this.kline.freshen(j))}mouseUp(t){t.preventDefault();let i=this.getCanvasPoint(t);this.isValidEvent(i)&&(this.mouseMode=B,this.kline.tooltipChart.setCross(i.y,!0),this.kline.freshen(j))}mouseLeave(t){t.preventDefault();let i=this.getCanvasPoint(t);this.kline.tooltipChart.setCross(i.y,!1),this.kline.freshen(j)}mouseMove(t){t.preventDefault();let i=this.getCanvasPoint(t);if(!this.isValidEvent(i))return this.kline.tooltipChart.setCross(i.y,!1),void this.kline.freshen(j);if(this.mouseMode===S){let i=t.x-this.mouseDownPoint.x;if(i>this.dataBounds.dataSpace/2){if(0===this.dataBounds.min||this.dataBounds.dataList.length<this.dataBounds.range)return!1;this.mouseDownPoint.x=t.x;let e=+Math.abs(i/this.dataBounds.dataSpace).toFixed(0);0===e&&(e=1),this.dataBounds.min-=e,this.dataBounds.min<=0&&(this.dataBounds.min=0),this.kline.freshen(U)}else if(i<0-this.dataBounds.dataSpace/2){if(this.dataBounds.min+this.dataBounds.range===this.dataBounds.dataList.length||this.dataBounds.dataList.length<this.dataBounds.range)return!1;this.mouseDownPoint.x=t.x;let e=+Math.abs(i/this.dataBounds.dataSpace).toFixed(0);0===e&&(e=1),this.dataBounds.min+=e,this.dataBounds.min>=this.dataBounds.dataList.length-this.dataBounds.range&&(this.dataBounds.min=this.dataBounds.dataList.length-this.dataBounds.range),this.kline.freshen()}}else this.mouseMode===B&&(this.dataBounds.calcCurrentDataIndex(i.x),this.kline.tooltipChart.setCross(i.y,!0),this.kline.freshen(j))}mouseWheel(t){t.preventDefault();let i=this.dataBounds.min,e=this.dataBounds.range,a=1;if(1===Math.max(-1,Math.min(1,t.wheelDelta||-t.detail))){if(a=.95,this.dataBounds.range>=this.dataBounds.maxRange)return!1}else if(a=1.05,this.dataBounds.range<=this.dataBounds.minRange)return!1;this.dataBounds.range=+(e/a).toFixed(0),this.dataBounds.range=Math.min(Math.max(this.dataBounds.range,this.dataBounds.minRange),this.dataBounds.maxRange),this.dataBounds.min=i+e-this.dataBounds.range,this.dataBounds.min+this.dataBounds.range>this.dataBounds.dataList.length&&(this.dataBounds.min=0),this.dataBounds.min<0&&(this.dataBounds.min=0),this.kline.freshen(U)}};const R=0,H=1,I=2,V=3,E=4,O=5;var z=class extends T{constructor(t,i,e){super(t,i,e),this.touchMode=R,this.touchStartPoint={x:0,y:0},this.touchMovePoint={x:0,y:0},this.touchCrossPoint={x:0,y:0},this.savedDist=1,this.savedXDist=1,this.touchRange=this.dataBounds.range,this.touchStartPosition=this.dataBounds.min,this.delayTimeout=null,this.delayActiveCross=(()=>{this.touchMode!==R&&this.touchMode!==O||this.kline&&(this.touchMode=E,this.touchCrossPoint={x:this.touchStartPoint.x,y:this.touchStartPoint.y},i.calcCurrentDataIndex(this.touchCrossPoint.x),this.kline.tooltipChart.setCross(this.touchCrossPoint.y,!0),this.kline.freshen(j))})}touchStart(t){if(1===t.targetTouches.length){let i=this.getCanvasPoint(t.targetTouches[0]);if(this.touchStartPoint={x:i.x,y:i.y},this.touchMovePoint={x:i.x,y:i.y},!this.isValidEvent(this.touchStartPoint))return;this.touchMode===E?(t.preventDefault(),this.distance(i.x,this.touchCrossPoint.x,i.y,this.touchCrossPoint.y)<10?this.performCross(t):(this.touchMode=O,this.kline.tooltipChart.setCross(0,!1),this.kline.freshen(j))):this.touchMode=R,this.removeDelayActiveCross(),this.postDelayDelayActiveCross()}else if(t.targetTouches.length>1){if(!this.isValidEvent(this.touchStartPoint))return;this.touchMode!==E&&(t.preventDefault(),this.savedDist=this.spacing(t),this.savedXDist=this.getXDist(t),this.savedDist>3&&(this.touchMode=I),this.touchRange=this.dataBounds.range,this.touchStartPosition=this.dataBounds.min)}}touchMove(t){if(this.isValidEvent(this.touchStartPoint))switch(this.touchMode){case I:t.preventDefault(),this.performZoom(t);break;case H:t.preventDefault(),this.performDrag(t);break;case E:t.preventDefault(),this.performCross(t);break;case O:this.removeDelayActiveCross();break;case R:{let i=this.getCanvasPoint(t.targetTouches[0]);if(Math.abs(this.distance(i.x,this.touchStartPoint.x,i.y,this.touchStartPoint.y))>10){let e=Math.abs(i.x-this.touchStartPoint.x);Math.abs(i.y-this.touchStartPoint.y)<=e&&(t.preventDefault(),this.kline.tooltipChart.setCross(0,!1),this.touchMode=H,this.kline.freshen(j))}this.removeDelayActiveCross()}}}touchEnd(t){this.isValidEvent(this.touchStartPoint)&&(t.targetTouches.length>0?this.touchMode===E?this.performCross(t):this.touchMode=V:(this.removeDelayActiveCross(),this.touchMode!==E&&(this.touchMode=R,this.kline.tooltipChart.setCross(0,!1),this.kline.freshen(j))))}performDrag(t){let i=this.getCanvasPoint(t.targetTouches[0]),e=i.x-this.touchMovePoint.x;if(e<0-this.dataBounds.dataSpace/2){if(this.dataBounds.min+this.dataBounds.range===this.dataBounds.dataList.length||this.dataBounds.dataList.length<this.dataBounds.range)return!1;this.touchMovePoint.x=i.x;let t=+Math.abs(e/this.dataBounds.dataSpace).toFixed(0);0===t&&(t=1),this.dataBounds.min+=t,this.dataBounds.min>=this.dataBounds.dataList.length-this.dataBounds.range&&(this.dataBounds.min=this.dataBounds.dataList.length-this.dataBounds.range),this.kline.freshen(U)}else if(e>this.dataBounds.dataSpace/2){if(0===this.dataBounds.min||this.dataBounds.dataList.length<this.dataBounds.range)return!1;this.touchMovePoint.x=i.x;let t=+Math.abs(e/this.dataBounds.dataSpace).toFixed(0);0===t&&(t=1),this.dataBounds.min-=t,this.dataBounds.min<=0&&(this.dataBounds.min=0),this.kline.freshen(U)}}performZoom(t){if(t.targetTouches.length>1&&this.spacing(t)>10){let i=this.getXDist(t)/this.savedXDist;if(i<1){if(this.dataBounds.range>=this.dataBounds.maxRange)return!1}else if(this.dataBounds.range<=this.dataBounds.minRange)return!1;this.dataBounds.range=+(this.touchRange/i).toFixed(0),this.dataBounds.range=Math.min(Math.max(this.dataBounds.range,this.dataBounds.minRange),this.dataBounds.maxRange),this.dataBounds.min=this.touchStartPosition+this.touchRange-this.dataBounds.range,this.dataBounds.min+this.dataBounds.range>this.dataBounds.dataList.length&&(this.dataBounds.min=0),this.dataBounds.min<0&&(this.dataBounds.min=0),this.kline.freshen(U)}}performCross(t){let i=this.getCanvasPoint(t.targetTouches[0]);this.touchCrossPoint={x:i.x,y:i.y},this.dataBounds.calcCurrentDataIndex(this.touchCrossPoint.x),this.kline.tooltipChart.setCross(this.touchCrossPoint.y,!0),this.kline.freshen(j)}postDelayDelayActiveCross(){this.delayTimeout=setTimeout(this.delayActiveCross,200)}removeDelayActiveCross(){this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=null)}distance(t,i,e,a){let s=t-i,o=e-a;return Math.sqrt(s*s+o*o)}spacing(t){if(t.targetTouches.length<2)return 0;let i=this.getCanvasPoint(t.targetTouches[0]),e=this.getCanvasPoint(t.targetTouches[1]),a=Math.abs(i.x-e.x),s=Math.abs(i.y-e.y);return Math.sqrt(a*a+s*s)}getXDist(t){let i=this.getCanvasPoint(t.targetTouches[0]),e=this.getCanvasPoint(t.targetTouches[1]);return Math.abs(i.x-e.y)}};async function F(t){let i,e,a,s,o,h=0,r=0;for(let n=0;n<t.length;n++){h+=t[n].turnover,0!==(r+=t[n].volume)&&(t[n].averagePrice=h/r);let l=t[n].close;n<8?(s=Y(t.slice(0,n+1)),o=N(t.slice(0,n+1))):(s=Y(t.slice(n-8,n+1)),o=N(t.slice(n-8,n+1)));let d=(l-s)/(o-s===0?1:o-s)*100;a=3*(i=2/3*(n<8?50:t[n-1].kdj.k)+1/3*d)-2*(e=2/3*(n<8?50:t[n-1].kdj.d)+1/3*i),t[n].kdj={k:i,d:e,j:a}}return t}function W(t,i){let e=0;for(let o=0;o<t.length;o++){let a=t[o].close-i;e+=a*a}let a=e>0;e=Math.abs(e);let s=Math.sqrt(e/t.length);return a?s:-1*s}function N(t){let i=0;if(t&&t.length>0){let e=t.length;i=t[0].high;for(let a=1;a<e;a++)i=Math.max(t[a].high,i)}return i}function Y(t){let i=0;if(t&&t.length>0){let e=t.length;i=t[0].low;for(let a=1;a<e;a++)i=Math.min(t[a].low,i)}return i}const _="all",j="tooltip",U="chart",X="candle_chart",K="vol_chart",G="indicator_chart",J=/Android|webOS|iPhone|iPod|BlackBerry|UCBrowser/i.test(navigator.userAgent);var q=class{constructor(t){this.rootDom=t,this.chartCanvasDom=null,this.chartCanvas=null,this.tooltipCanvasDom=null,this.tooltipCanvas=null,this.viewPortHandler=new a,this.dataBounds=new s(this.viewPortHandler),this.grid=new b,this.yAxis=new g,this.xAxis=new A,this.candle=new M,this.indicator=new d,this.tooltip=new C,this.gridChart=new h(this.grid,this.dataBounds,this.viewPortHandler),this.candleChart=new w(this.candle,this.indicator,this.yAxis,this.dataBounds,this.viewPortHandler),this.volChart=new v(this.indicator,this.xAxis,this.yAxis,this.dataBounds,this.viewPortHandler,l.VOL),this.indicatorChart=new v(this.indicator,this.xAxis,this.yAxis,this.dataBounds,this.viewPortHandler),this.xAxisChart=new f(this.xAxis,this.dataBounds,this.viewPortHandler),this.tooltipChart=new k(this.tooltip,this.candle,this.indicator,this.yAxis,this.candleChart,this.volChart,this.indicatorChart,this.dataBounds,this.viewPortHandler),this.motionEvent=J?new z(this,this.dataBounds,this.viewPortHandler):new D(this,this.dataBounds,this.viewPortHandler),this.isShouldCalcOffset=!0,this.isShouldCalcChartHeight=!0,this.init()}init(){this.rootDom.style.position="relative",this.chartCanvasDom=document.createElement("canvas"),this.chartCanvasDom.style.position="absolute",this.chartCanvasDom.style.top="0",this.chartCanvasDom.style.right="0",this.chartCanvasDom.style.bottom="0",this.chartCanvasDom.style.left="0",this.tooltipCanvasDom=document.createElement("canvas"),this.tooltipCanvasDom.style.position="absolute",this.tooltipCanvasDom.style.top="0",this.tooltipCanvasDom.style.right="0",this.tooltipCanvasDom.style.bottom="0",this.tooltipCanvasDom.style.left="0";try{J?(this.tooltipCanvasDom.addEventListener("touchstart",t=>{this.motionEvent.touchStart(t)},!1),this.tooltipCanvasDom.addEventListener("touchmove",t=>{this.motionEvent.touchMove(t)},!1),this.tooltipCanvasDom.addEventListener("touchend",t=>{this.motionEvent.touchEnd(t)},!1)):(this.tooltipCanvasDom.addEventListener("mousedown",t=>{this.motionEvent.mouseDown(t)}),this.tooltipCanvasDom.addEventListener("mouseup",t=>{this.motionEvent.mouseUp(t)}),this.tooltipCanvasDom.addEventListener("mousemove",t=>{this.motionEvent.mouseMove(t)}),this.tooltipCanvasDom.addEventListener("mouseleave",t=>{this.motionEvent.mouseLeave(t)}),this.tooltipCanvasDom.addEventListener("mousewheel",t=>{this.motionEvent.mouseWheel(t)},!1),this.tooltipCanvasDom.addEventListener("DOMMouseScroll",t=>{this.motionEvent.mouseWheel(t)},!1))}catch(t){}this.rootDom.appendChild(this.chartCanvasDom),this.chartCanvas=this.chartCanvasDom.getContext("2d"),this.rootDom.appendChild(this.tooltipCanvasDom),this.tooltipCanvas=this.tooltipCanvasDom.getContext("2d"),this.resize()}calcChartHeight(t){let i=this.xAxis.getRequiredHeightSpace(),e=t-i,a=this.volChart.isDisplayChart(),s=this.indicatorChart.isDisplayChart(),o=0,h=0;if(a&&s){let t=.2*e;o=t,h=t}else a&&!s?o=.3*e:!a&&s&&(h=.3*e);let r=e-o-h,n=0;this.candleChart.setChartDimens(r,n),n+=r,this.volChart.setChartDimens(o,n),n+=o,this.indicatorChart.setChartDimens(h,n),n+=h,this.xAxisChart.setChartDimens(i,n)}calcOffsets(){let t=0,i=0,e=0;if(this.yAxis.needsOffset()){let e=this.yAxis.getRequiredWidthSpace();this.yAxis.yAxisPosition===x.LEFT?t+=e:i+=e}e+=this.xAxis.getRequiredHeightSpace(),this.viewPortHandler.restrainViewPort(t,0,i,e)}freshen(t=_){const i=this.rootDom.offsetWidth,e=this.rootDom.offsetHeight;switch(t){case U:this.chartCanvas.clearRect(0,0,2*i,2*e);break;case j:this.tooltipCanvas.clearRect(0,0,2*i,2*e);break;case _:this.chartCanvas.clearRect(0,0,2*i,2*e),this.tooltipCanvas.clearRect(0,0,2*i,2*e);break;case X:this.tooltipCanvas.clearRect(0,0,2*i,2*e),this.chartCanvas.clearRect(0,this.candleChart.chartTop,2*i,this.candleChart.chartHeight);break;case K:this.volChart.isDisplayChart()&&this.chartCanvas.clearRect(0,this.volChart.chartTop,2*i,this.volChart.chartHeight);break;case G:this.indicatorChart.isDisplayChart()&&(this.tooltipCanvas.clearRect(0,0,2*i,2*e),this.chartCanvas.clearRect(0,this.indicatorChart.chartTop,2*i,this.indicatorChart.chartHeight))}this.isShouldCalcChartHeight&&(this.calcChartHeight(2*e),this.isShouldCalcChartHeight=!1),this.isShouldCalcOffset&&(this.chartCanvasDom.width=2*i,this.chartCanvasDom.height=2*e,this.chartCanvasDom.style.width=i+"px",this.chartCanvasDom.style.height=e+"px",this.tooltipCanvasDom.width=2*i,this.tooltipCanvasDom.height=2*e,this.tooltipCanvasDom.style.width=i+"px",this.tooltipCanvasDom.style.height=e+"px",this.viewPortHandler.setChartDimens(2*i,2*e),this.calcOffsets(),this.isShouldCalcOffset=!1),this.draw(t)}draw(t){this.dataBounds.space(),t===K?this.volChart.draw(this.chartCanvas):t===G?(this.indicatorChart.draw(this.chartCanvas),this.tooltipChart.draw(this.tooltipCanvas)):t===X?(this.candleChart.draw(this.chartCanvas),this.tooltipChart.draw(this.tooltipCanvas)):(t!==U&&t!==_||(this.gridChart.draw(this.chartCanvas),this.xAxisChart.draw(this.chartCanvas),this.candleChart.draw(this.chartCanvas),this.volChart.draw(this.chartCanvas),this.indicatorChart.draw(this.chartCanvas)),t!==j&&t!==_||this.tooltipChart.draw(this.tooltipCanvas))}async calcIndicator(t,i=U){try{switch(t){case l.MA:this.dataBounds.dataList=await async function(t){let i,e,a,s,o=0,h=0,r=0,n=0,l=0,d=0;for(let c=0;c<t.length;c++){d+=t[c].volume,l+=t[c].turnover||0,0!==d&&(t[c].averagePrice=l/d);let u=t[c].close;o+=u,h+=u,r+=u,n+=u,i=c<5?o/(c+1):(o-=t[c-5].close)/5,e=c<10?h/(c+1):(h-=t[c-10].close)/10,a=c<20?r/(c+1):(r-=t[c-20].close)/20,s=c<60?n/(c+1):(n-=t[c-60].close)/60,t[c].ma={ma5:i,ma10:e,ma20:a,ma60:s}}return t}(this.dataBounds.dataList);break;case l.MACD:this.dataBounds.dataList=await async function(t){let i,e,a=0,s=0,o=0,h=0,r=0,n=0,l=0,d=0;for(let c=0;c<t.length;c++){l+=t[c].turnover,0!==(d+=t[c].volume)&&(t[c].averagePrice=l/d);let u=t[c].close;c>0&&(n=2*((o=(i=(2*u+11*a)/13)-(e=(2*u+25*s)/27))-(h=(2*o+8*r)/10)),a=i,s=e,r=h),t[c].macd={diff:o,dea:h,macd:n}}return t}(this.dataBounds.dataList);break;case l.VOL:this.dataBounds.dataList=await async function(t){let i,e,a,s=0,o=0,h=0,r=0,n=0;for(let l=0;l<t.length;l++){r+=t[l].turnover,0!==(n+=t[l].volume)&&(t[l].averagePrice=r/n);let d=t[l].volume;s+=d,o+=d,h+=d,i=l<5?s/(l+1):(s-=t[l-5].volume)/5,e=l<10?o/(l+1):(o-=t[l-10].volume)/10,a=l<20?h/(l+1):(h-=t[l-20].volume)/20,t[l].vol={num:d,ma5:i,ma10:e,ma20:a}}return t}(this.dataBounds.dataList);break;case l.BOLL:this.dataBounds.dataList=await async function(t){let i,e,a,s,o,h=0,r=0,n=0,l=0;for(let d=0;d<t.length;d++){n+=t[d].turnover,0!==(l+=t[d].volume)&&(t[d].averagePrice=n/l);let c=t[d].close;h+=c,r+=c,d>=24?(e=r/25,r-=t[d-24].close):e=r/(d+1),d>=25?(i=h/26,a=W(t.slice(d-25,d+1),i),h-=t[d-25].close):(i=h/(d+1),a=W(t.slice(0,d+1),i)),s=e+2*a,o=e-2*a,t[d].boll={up:s,mid:i,dn:o}}return t}(this.dataBounds.dataList);break;case l.BIAS:this.dataBounds.dataList=await async function(t){let i,e,a,s=0,o=0,h=0,r=0,n=0;for(let l=0;l<t.length;l++){r+=t[l].turnover,0!==(n+=t[l].volume)&&(t[l].averagePrice=r/n);let d=t[l].close;if(s+=d,o+=d,h+=d,l<6){let t=s/(l+1);i=(d-t)/t*100}else{let e=(s-=t[l-6].close)/6;i=(d-e)/e*100}if(l<12){let t=o/(l+1);e=(d-t)/t*100}else{let i=(o-=t[l-12].close)/12;e=(d-i)/i*100}if(l<24){let t=h/(l+1);a=(d-t)/t*100}else{let i=(h-=t[l-24].close)/24;a=(d-i)/i*100}t[l].bias={bias1:i,bias2:e,bias3:a}}return t}(this.dataBounds.dataList);break;case l.BRAR:this.dataBounds.dataList=await async function(t){let i=0,e=0,a=0,s=0,o=0,h=0,r=0,n=0;for(let l=0;l<t.length;l++){r+=t[l].turnover,0!==(n+=t[l].volume)&&(t[l].averagePrice=r/n);let d=t[l].high,c=t[l].low,u=t[l].open;if(o+=d-u,h+=u-c,l>25&&(o-=t[l-26].high-t[l-26].open,h-=t[l-26].open-t[l-26].low),0!==h&&(e=o/h*100),l>0){let e=t[l-1].close,o=d-e;o<0&&(o=0),a+=o;let h=e-c;h<0&&(h=0),0!==(s+=h)&&(i=a/s*100)}t[l].brar={br:i,ar:e}}return t}(this.dataBounds.dataList);break;case l.CCI:this.dataBounds.dataList=await async function(t){let i,e=0,a=0,s=0;for(let o=0;o<t.length;o++){a+=t[o].turnover,0!==(s+=t[o].volume)&&(t[o].averagePrice=a/s);let h=(t[o].high+t[o].low+t[o].close)/3;if(e+=h,o>=13){let a=e/14;e-=(t[o-13].high+t[o-13].low+t[o-13].close)/3;let s=0;for(let i=o-13;i<o+1;i++){let e=(t[i].high+t[i].low+t[i].close)/3;s+=Math.abs(e-a)}let r=s/14;i=0===r?0:200*(h-a)/3/r}else{let a=e/(o+1),s=0;for(let i=0;i<o+1;i++){let e=(t[i].high+t[i].low+t[i].close)/3;s+=Math.abs(e-a)}let r=s/(o+1);i=0===r?0:200*(h-a)/3/r}t[o].cci={cci:i}}return t}(this.dataBounds.dataList);break;case l.CR:this.dataBounds.dataList=await async function(t){let i,e,a,s,o,h,r,n,l=0,d=0,c=0,u=0,x=[],m=0,g=[],p=0,v=[],y=0,L=[],M=0,w=0;for(let f=0;f<t.length;f++){if(M+=t[f].turnover,0!==(w+=t[f].volume)&&(t[f].averagePrice=M/w),f>0){let i=t[f-1].high,e=t[f-1].low,a=(i+t[f-1].close+e+t[f-1].open)/4,s=t[f].high,o=t[f].low,h=s-a;h<0&&(h=0),d+=h;let r=a-o;if(r<0&&(r=0),c+=r,f>26){let i=(t[f-27].high+t[f-27].low+t[f-27].close+t[f-27].open)/4,e=t[f-26].high,a=t[f-26].low,s=e-i;s<0&&(s=0);let o=i-a;o<0&&(o=0),d-=s,c-=o}0!==c&&(l=d/c*100);let n=(t[f-1].high+t[f-1].low+t[f-1].close)/3,u=t[f].high-n;d+=u<=0?0:u;let x=n-t[f].low;c+=x<=0?0:x}u+=l,m+=l,p+=l,y+=l,o=f<10?u/(f+1):(u-=t[f-10].cr.cr)/10,x.push(o),h=f<20?m/(f+1):(m-=t[f-20].cr.cr)/20,g.push(h),r=f<40?p/(f+1):(p-=t[f-40].cr.cr)/40,v.push(r),n=f<60?y/(f+1):(y-=t[f-60].cr.cr)/60,L.push(n),i=f<5?x[0]:x[f-5],e=f<9?g[0]:g[f-9],a=f<17?v[0]:v[f-17],s=f<25?L[0]:L[f-25],t[f].cr={cr:l,ma1:i,ma2:e,ma3:a,ma4:s}}return t}(this.dataBounds.dataList);break;case l.DMA:this.dataBounds.dataList=await async function(t){let i,e,a,s,o=0,h=0,r=0,n=0,l=0;for(let d=0;d<t.length;d++){n+=t[d].turnover,0!==(l+=t[d].volume)&&(t[d].averagePrice=n/l);let c=t[d].close;o+=c,h+=c,r+=i=(a=d<10?o/(d+1):(o-=t[d-10].close)/10)-(s=d<50?h/(d+1):(h-=t[d-50].close)/50),e=d<10?r/(d+1):(r-=t[d-10].dma.dif)/10,t[d].dma={dif:i,difMa:e}}return t}(this.dataBounds.dataList);break;case l.DMI:this.dataBounds.dataList=await async function(t){let i,e,a,s=0,o=0,h=0,r=0,n=[],l=[],d=[],c=[],u=[],x=0,m=0;for(let g=0;g<t.length;g++){if(x+=t[g].turnover,0!==(m+=t[g].volume)&&(t[g].averagePrice=x/m),g>0){a=t[g-1].close,i=t[g].high-t[g-1].high,e=t[g-1].low-t[g].low;let x,m,p=t[g].high-t[g].low>Math.abs(t[g].high-a)?t[g].high-t[g].low:Math.abs(t[g].high-a),v=p>Math.abs(a)-t[g].low?p:Math.abs(a)-t[g].low;n.push(v),x=i>0&&i>e?i:0,l.push(x),m=e>0&&e>i?e:0,d.push(m);let y=0,L=0,M=0;for(let t=0;t<n.length;t++)y+=n[t],L+=l[t],M+=d[t];s=100*L/y,o=100*M/y;let w=Math.abs(o-s)/(o+s)*100;c.push(w);let f=0;for(let t=0;t<c.length;t++)f+=c[t];h=f/6,u.push(h);let P=0;P+=u[0],r=(P+=u[u.length-1])/2,g>=14&&(n.splice(0,1),l.splice(0,1),d.splice(0,1)),g>=19&&c.splice(0,1),g>=25&&u.splice(0,1)}t[g].dmi={pdi:s,mdi:o,adx:h,adxr:r}}return t}(this.dataBounds.dataList);break;case l.KDJ:case l.KD:this.dataBounds.dataList=await F(this.dataBounds.dataList);break;case l.RSI:this.dataBounds.dataList=await async function(t){let i,e,a,s,o,h,r=0,n=0,l=0,d=0,c=0,u=0,x=0,m=0,g=0,p=0,v=0,y=0,L=0;for(let M=0;M<t.length;M++){if(y+=t[M].turnover,0!==(L+=t[M].volume)&&(t[M].averagePrice=y/L),M>0){let y=t[M].close-t[M-1].close;y>0?d+=y:c+=y;let L=y>0?y:0,w=Math.abs(y);M<6?(i=d/(M+1),e=(Math.abs(c)+d)/(M+1)):(i=(L+5*u)/6,e=(w+5*x)/6),u=i,x=e,r=i/e*100,M<12?(a=d/(M+1),s=(Math.abs(c)+d)/(M+1)):(a=(L+11*m)/12,s=(w+11*g)/12),m=a,g=s,n=a/s*100,M<24?(o=d/(M+1),h=(Math.abs(c)+d)/(M+1)):(o=(L+23*p)/24,h=(w+23*v)/24),p=o,v=h,l=o/h*100}t[M].rsi={rsi1:r,rsi2:n,rsi3:l}}return t}(this.dataBounds.dataList);break;case l.PSY:this.dataBounds.dataList=await async function(t){let i=0,e=0,a=0,s=0;for(let o=0;o<t.length;o++)a+=t[o].turnover,0!==(s+=t[o].volume)&&(t[o].averagePrice=a/s),o>0&&(e+=t[o].close-t[o-1].close>0?1:0,o>=12?(i=e/12*100,e-=t[o-11].close-t[o-12].close>0?1:0):i=e/o*100),t[o].psy={psy:i};return t}(this.dataBounds.dataList);break;case l.TRIX:this.dataBounds.dataList=await async function(t){let i,e,a,s,o=0,h=0,r=0,n=0,l=0,d=0,c=0,u=0,x=0,m=0;for(let g=0;g<t.length;g++){x+=t[g].turnover,0!==(m+=t[g].volume)&&(t[g].averagePrice=x/m);let p=t[g].close;r+=p,n=e=g<12?r/(g+1):(2*p+11*n)/13,l+=e,d=a=g<12?l/(g+1):(2*e+11*d)/13,c+=a,s=g<12?c/(g+1):(2*a+11*u)/13,0!==u&&(o=(s-u)/u*100),h+=o,u=s,g<20?i=h/(g+1):(i=h/20,h-=t[g-19].trix.trix),t[g].trix={trix:o,maTrix:i}}return t}(this.dataBounds.dataList);break;case l.OBV:this.dataBounds.dataList=await async function(t){let i,e=0,a=0,s=0;for(let o=0;o<t.length;o++){a+=t[o].turnover,0!==(s+=t[o].volume)&&(t[o].averagePrice=a/s);let h=t[o].close,r=t[o].high,n=r-h,l=t[o].volume*(h-t[o].low-n)/r;e+=l,i=o<30?e/(o+1):(e-=t[o-30].obv.obv)/30,t[o].obv={obv:l,maObv:i}}return t}(this.dataBounds.dataList);break;case l.VR:this.dataBounds.dataList=await async function(t){let i,e=0,a=0,s=0,o=0,h=0,r=0,n=0;for(let l=0;l<t.length;l++){if(r+=t[l].turnover,0!==(n+=t[l].volume)&&(t[l].averagePrice=r/n),l<24){let i=t[l].close,o=t[l].open,h=t[l].volume;i>o?e+=h:i<o?a+=h:s+=h}else for(let i=l-24;i<l;i++){let o=t[i].close,h=t[i].open,r=t[i].volume;i===l-24&&(e=0,a=0,s=0),o>h?e+=r:o<h?a+=r:s+=r}let d=a+.5*s;0!==d&&(o=(e+.5*s)/d*100),h+=o,i=l<30?h/(l+1):(h-=t[l-30].vr.vr)/30,t[l].vr={vr:o,maVr:i}}return t}(this.dataBounds.dataList);break;case l.WR:this.dataBounds.dataList=await async function(t){let i=0,e=0,a=0,s=Number.MIN_VALUE,o=Number.MAX_VALUE,h=Number.MIN_VALUE,r=Number.MAX_VALUE,n=Number.MIN_VALUE,l=Number.MAX_VALUE,d=0,c=0;for(let u=0;u<t.length;u++){d+=t[u].turnover,0!==(c+=t[u].volume)&&(t[u].averagePrice=d/c);let x=t[u].close;if(u<13){let d=t[u].high,c=t[u].low;s=Math.max(d,s),o=Math.min(c,o),h=Math.max(d,h),r=Math.min(c,r),n=Math.max(d,n),l=Math.min(c,l);let m=s-o;0!==m&&(i=(s-x)/m*100),e=i,a=i}else{for(let e=u-13;e<u;e++){e===u-13?(s=t[e].high,o=t[e].low):(s=Math.max(t[e].high,s),o=Math.min(t[e].low,o));let a=s-o;0!==a&&(i=(s-x)/a*100)}if(u<34){let i=t[u].high,s=t[u].low;h=Math.max(i,h),r=Math.min(s,r),n=Math.max(i,n),l=Math.min(s,l);let o=h-r;0!==o&&(e=(h-x)/o*100),a=e}else{for(let i=u-34;i<u;i++){i===u-34?(h=t[i].high,r=t[i].low):(h=Math.max(t[i].high,h),r=Math.min(t[i].low,r));let a=h-r;0!==a&&(e=(h-x)/a*100)}if(u<89){let i=t[u].high,e=t[u].low,s=(n=Math.max(i,n))-(l=Math.min(e,l));0!==s&&(a=(n-x)/s*100)}else for(let i=u-89;i<u;i++){i===u-89?(n=t[i].high,l=t[i].low):(n=Math.max(t[i].high,n),l=Math.min(t[i].low,l));let e=n-l;0!==e&&(a=(n-x)/e*100)}}}t[u].wr={wr1:i,wr2:e,wr3:a}}return t}(this.dataBounds.dataList);break;case l.MTM:this.dataBounds.dataList=await async function(t){let i,e,a=0,s=0,o=0;for(let h=0;h<t.length;h++){s+=t[h].turnover,0!==(o+=t[h].volume)&&(t[h].averagePrice=s/o);let r=t[h].close;a+=i=h<6?r-t[0].close:r-t[h-6].close,e=h<10?a/(h+1):(a-=t[h-10].mtm.mtm)/10,t[h].mtm={mtm:i,mtmMa:e}}return t}(this.dataBounds.dataList);break;case l.EMV:this.dataBounds.dataList=await async function(t){let i,e=0,a=0,s=0,o=[],h=0,r=0;for(let n=0;n<t.length;n++){let l=t[n].turnover;if(h+=l,0!==(r+=t[n].volume)&&(t[n].averagePrice=h/r),n>0){let i=t[n].high,e=t[n].low;s=((i+e)/2-(t[n-1].high+t[n-1].low)/2)*(i-e)/l}o.push(s),n<14?e+=s:e-=o[n-14],a+=e,i=n<9?a/(n+1):(a-=t[n-9].emv.emv)/9,t[n].emv={emv:e,maEmv:i}}return t}(this.dataBounds.dataList);break;case l.SAR:this.dataBounds.dataList=await async function(t){let i=0,e=-100,a=!1,s=0,o=0,h=0;for(let r=0;r<t.length;r++){o+=t[r].turnover,0!==(h+=t[r].volume)&&(t[r].averagePrice=o/h);let n=s,l=t[r].high,d=t[r].low;if(a){(-100===e||e<l)&&(e=l,i=Math.min(i+.02,2)),s=n+i*(e-n);let o=Math.min(t[Math.max(1,r)-1].low,d);s>t[r].low?(s=e,i=0,e=-100,a=!a):s>o&&(s=o)}else{(-100===e||e>d)&&(e=d,i=Math.min(i+.02,.2)),s=n+i*(e-n);let o=Math.max(t[Math.max(1,r)-1].high,l);s<t[r].high?(s=e,i=0,e=-100,a=!a):s<o&&(s=o)}t[r].sar={sar:s}}return t}(this.dataBounds.dataList)}this.freshen(i)}catch(e){}}calcChartIndicator(){let t=this.candleChart.isDisplayChart(),i=this.volChart.isDisplayChart(),e=this.indicatorChart.isDisplayChart();t&&this.calcIndicator(this.candleChart.indicatorType),i&&this.calcIndicator(l.VOL),e&&this.calcIndicator(this.indicatorChart.indicatorType)}checkData(t){if("object"!==typeof t||null===t.open||void 0===t.open||null===t.close||void 0===t.close||null===t.high||void 0===t.high||null===t.low||void 0===t.low||null===t.timestamp||void 0===t.timestamp||null===t.volume||void 0===t.volume||null===t.turnover||void 0===t.turnover)throw new Error("The data must be object and need to contain open, close, high, low, timestamp, volume, and turnover fields")}resize(){this.isShouldCalcOffset=!0,this.freshen()}setConfig(t){if(t){let i=t.common;i&&(i.minVisibleRange>0&&(this.dataBounds.minRange=i.minVisibleRange),i.maxVisibleRange>0&&i.maxVisibleRange>this.dataBounds.minRange&&(this.dataBounds.maxRange=i.maxVisibleRange),i.defaultVisibleRange>0&&i.defaultVisibleRange>this.dataBounds.minRange-1&&i.defaultVisibleRange<this.dataBounds.maxRange+1&&(this.dataBounds.range=i.defaultVisibleRange));let e=t.grid;e&&(this.grid.display=e.display,e.lineSize>0&&(this.grid.lineSize=e.lineSize),e.lineColor&&(this.grid.lineColor=e.lineColor));let a=t.candle;a&&(a.chartType&&(this.candle.chartStyle=a.chartType),a.timeChart&&(this.candle.timeChart={...this.candle.timeChart,...a.timeChart}),a.candleChart&&(this.candle.candleChart={...this.candle.candleChart,...a.candleChart}),a.lowestHighestPriceMarkTextColor&&(this.candle.lowestHighestPriceMarkTextColor=a.lowestHighestPriceMarkTextColor),a.lowestHighestPriceMarkTextSize>0&&(this.candle.lowestHighestPriceMarkTextSize=a.lowestHighestPriceMarkTextSize),this.candle.lowestHighestValueFormatter=a.lowestHighestValueFormatter,a.highestPriceMark&&(this.candle.highestPriceMark={...this.candle.highestPriceMark,...a.highestPriceMark}),a.lowestPriceMark&&(this.candle.lowestPriceMark={...this.candle.lowestPriceMark,...a.lowestPriceMark}),a.lastPriceMark&&(this.candle.lastPriceMark={...this.candle.lastPriceMark,...a.lastPriceMark}));let s=t.indicator;s&&(s.lineSize>0&&(this.indicator.lineSize=s.lineSize),s.increasingColor&&(this.indicator.increasingColor=s.increasingColor),s.decreasingColor&&(this.indicator.decreasingColor=s.decreasingColor),s.lineColors&&s.lineColors.length>4&&(this.indicator.lineColors=s.lineColors));let o=t.xAxis;o&&(null!==o.display&&void 0!==o.display&&(this.xAxis.display=o.display),this.xAxis.color&&(this.xAxis.color=o.color),o.minHeight>=0&&(this.xAxis.xAxisMinHeight=o.minHeight),o.maxHeight>=0&&o.maxHeight>=this.xAxis.xAxisMinHeight&&(this.xAxis.xAxisMaxHeight=o.maxHeight),o.axisLine&&(this.xAxis.axisLine={...this.xAxis.axisLine,...o.axisLine}),o.tickText&&(this.xAxis.tickText={...this.xAxis.tickText,...o.tickText}),o.tickLine&&(this.xAxis.tickLine={...this.xAxis.tickLine,...o.tickLine}),o.separatorLine&&(this.xAxis.separatorLine={...this.xAxis.separatorLine,...o.separatorLine}));let h=t.yAxis;h&&(null!==h.display&&void 0!==h.display&&(this.yAxis.display=h.display),h.position&&(this.yAxis.yAxisPosition=h.position,this.isShouldCalcOffset=!0),this.yAxis.color&&(this.yAxis.color=h.color),h.minWidth>=0&&(this.yAxis.yAxisMinWidth=h.minWidth),h.maxWidth>=0&&h.maxWidth>=this.yAxis.yAxisMinWidth&&(this.yAxis.yAxisMaxWidth=h.maxWidth),h.axisLine&&(this.yAxis.axisLine={...this.yAxis.axisLine,...h.axisLine}),h.tickText&&(this.yAxis.tickText={...this.yAxis.tickText,...h.tickText},this.isShouldCalcOffset=!0),h.tickLine&&(this.yAxis.tickLine={...this.yAxis.tickLine,...h.tickLine}),h.separatorLine&&(this.yAxis.separatorLine={...this.yAxis.separatorLine,...h.separatorLine}));let r=t.tooltip;r&&(r.textSize>0&&(this.tooltip.textSize=r.textSize),r.crossLine&&(r.crossLine.text&&(r.crossLine.text={...this.tooltip.crossLine.text,...r.crossLine.text}),this.tooltip.crossLine={...this.tooltip.crossLine,...r.crossLine}),r.generalData&&(r.generalData.text&&(r.generalData.text={...this.tooltip.generalData.text,...r.generalData.text}),this.tooltip.generalData={...this.tooltip.generalData,...r.generalData}),r.indicatorData&&(r.indicatorData.text&&(r.indicatorData.text={...this.tooltip.indicatorData.text,...r.indicatorData.text}),this.tooltip.indicatorData={...this.tooltip.indicatorData,...r.indicatorData})),this.freshen()}}setDataList(t){if(t&&Array.isArray(t)){for(let i=0;i<t.length;i++)this.checkData(t[i]);this.dataBounds.dataList=t,this.dataBounds.moveToLast(),this.calcChartIndicator()}}addData(t,i=this.dataBounds.dataList.length){this.checkData(t),this.dataBounds.dataList[i]=t,this.dataBounds.min+this.dataBounds.range>=this.dataBounds.dataList.length-1&&this.dataBounds.moveToLast(),this.calcChartIndicator()}setMainIndicatorType(t){this.candleChart.indicatorType!==t&&(this.candleChart.indicatorType=t,this.calcIndicator(t,X))}setSubIndicatorType(t){if(this.indicatorChart.indicatorType!==t){let i=this.indicatorChart.isDisplayChart()&&t===l.NO||!this.indicatorChart.isDisplayChart()&&t!==l.NO;this.indicatorChart.indicatorType=t,i&&(this.isShouldCalcChartHeight=!0),this.calcIndicator(t),this.freshen(this.isShouldCalcChartHeight?_:G)}}setShowVolIndicatorChart(t){this.volChart.isDisplayChart()!==t&&(t?(this.volChart.indicatorType=l.VOL,this.calcIndicator(l.VOL)):this.volChart.indicatorType=l.NO,this.isShouldCalcChartHeight=!0,this.freshen(K))}};const Z={init:t=>new q(t),version:()=>"1.1.1"};i.default=Z}]).default});